import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.StringTokenizer;

public class Main13460_5 {
	
	public static int n;
	public static int m;
	public static char[][] map;
	public static Ball red;
	public static Ball blue;
	public static int[][] dir = {{-1,0},{1,0},{0,-1},{0,1}};
	public static int result;
	
	public static void main(String[] args) throws Exception{
		System.setIn(new FileInputStream("input13460.txt"));
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		StringTokenizer st = new StringTokenizer(br.readLine());
		
		n = Integer.parseInt(st.nextToken());
		m = Integer.parseInt(st.nextToken());
		map = new char[n][m];
		for(int i=0; i<n; i++) {
			map[i] = br.readLine().toCharArray();
			for(int j=0; j<m; j++) {
				if(map[i][j]=='R') {
					red = new Ball(i,j);
					map[i][j] = '.';
				}else if(map[i][j]=='B') {
					blue = new Ball(i,j);
					map[i][j] = '.';
				}
			}
		}
		
		for(int k=0; k<4; k++) {
			moveBall(red.x,red.y,blue.x,blue.y,0,k);
		}
		
		br.close();
	}
	
	public static void moveBall(int rx, int ry, int bx, int by, int count, int direction) {
		if(count>10) return;
		if(map[bx][by]=='O') return;
		if(map[rx][ry]=='O') {
			if(count<result) result = count;
			return;
		}
		
		Ball first=red, second=blue;
		if(direction==0) {	//상
			if(ry==by) {
				if(rx>bx) {
					first = blue;
					second = red;
				}
			}
		}else if(direction==1) {	//하
			if(ry==by) {
				if(rx<bx) {
					first = blue;
					second = red;
				}
			}
		}else if(direction==2) {	//좌
			if(rx==bx) {
				if(ry>by) {
					first = blue;
					second = red;
				}
			}
		}else {	//우
			if(rx==bx) {
				if(ry<by) {
					first = blue;
					second = red;
				}
			}
		}
		
		//move first
		int nx=first.x,ny=first.y;
		while(true) {
			nx = nx + dir[direction][0];
			ny = ny + dir[direction][1];
			if(nx>-1 && ny>-1 && nx<n && ny<m) {
				if(map[nx][ny]=='.') continue;
				else if(map[nx][ny]=='#') {
					first.x = nx - dir[direction][0];
					first.y = ny - dir[direction][1];
					break;
				}else if(map[nx][ny]=='O') {
					first.x = nx;
					first.y = ny;
					break;
				}
			}
		}
		//move second
		nx=second.x;
		ny=second.y;
		while(true) {
			nx = nx + dir[direction][0];
			ny = ny + dir[direction][1];
			if(nx>-1 && ny>-1 && nx<n && ny<m) {
				if(map[nx][ny]=='#' || (nx==first.x && ny==first.y)) {
					second.x = nx - dir[direction][0];
					second.y = ny - dir[direction][1];
					break;
				}else if(map[nx][ny]=='O') {
					second.x = nx;
					second.y = ny;
					break;
				}else if(map[nx][ny]=='.') continue;
			}
		}
		
	}
	
	public static class Ball {
		int x;
		int y;
		public Ball(int x, int y) {
			this.x = x;
			this.y = y;
		}
	}

}
